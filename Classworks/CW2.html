<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="../images/icon192.png">
    <title>List of Objects </title>

  <style>
    body { max-width: 500px; }
    #inp { white-space: pre-wrap; }
    #sample { overflow-x: auto; }
    #out { color: blue; }
  </style>
</head>

<body>

<h2 id=title></h2>
<b>Text input &emsp;
<input type=button id=convert value=Convert onclick="toList()">
</b>
<p>
  <textarea id=inp rows=10 cols=50 ></textarea>
</p>
<b>JSON output</b>
<pre id=out></pre>
<hr />
<b>Sample code</b>
<pre id=sample></pre>
<hr />
<p></p>
<p>Ref: 
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters#Examples" 
   target="NewTab">Rest Parameters</a>
</p>

<script>
"use strict";
let array;
function toList(str) {
  function toObject(x) {
    let b = {}
    for (let [i,s] of x.split('\t').entries())
      b[keys[i]] = (isNaN(s)? s : Number(s))
    return b
  }
    if (str) inp.value = str
    else str = inp.value
    let [d0, ...data] = str.split('\n')
    let keys = d0.split('\t')
    console.log("Keys:", keys)
    let a = data.map(toObject)
    array=a
    out.innerText = JSON.stringify(a, '' ,2)
    console.table(a)
    console.log(array.map(tamIsmiAl));
    console.log(array.filter(sonHaneBes));
    console.log(array.filter(ismiOileBaslayan));
    return a
}

function tamIsmiAl(item){
    return [item.ad,item.soyad].join(" ");
}

function sonHaneBes(item){
    return (item.numara % 10 == 5);
}

function ismiOileBaslayan(item){
    return (item.ad[0]=='O')
}

const PLANET = 
`Name	Diam	Mass	Radius	Period
Mercury	0.382	0.06	0.40	0.24
Venus	0.949	0.82	0.72	0.62
Earth	1.000	1.00	1.00	1.00
Mars	0.532	0.11	1.52	1.88
Jupiter	11.209	317.80	5.20	11.86
Saturn	9.449	95.20	9.54	29.46
Uranus	4.007	14.60	19.22	84.01
Neptune	3.883	17.20	30.06	164.80`,

STUDENTS = `ad	soyad	numara
Berat	Alkin	12345
Omer 	Adali	12346
Ihsan	Simsek	22347`

    title.innerText = document.title
    sample.innerText = tamIsmiAl+sonHaneBes+ismiOileBaslayan
    inp.value = STUDENTS
    //toList()  //array of objects
</script>
<script src="/2022/navbar.js"></script>
</body>
</html>
